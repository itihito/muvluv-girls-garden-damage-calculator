# ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å®Ÿè£…è¨ˆç”»æ›¸

**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå:** ãƒãƒ–ãƒ©ãƒ´ ã‚¬ãƒ¼ãƒ«ã‚ºã‚¬ãƒ¼ãƒ‡ãƒ³ ãƒ€ãƒ¡ãƒ¼ã‚¸è¨ˆç®—æ©Ÿ
**ä½œæˆæ—¥:** 2025-10-04
**å¯¾è±¡ãƒãƒ¼ã‚¸ãƒ§ãƒ³:** v1.0.0 â†’ v1.1.0
**ç›®çš„:** ã‚³ãƒ¼ãƒ‰ã®å¯èª­æ€§ã€ä¿å®ˆæ€§ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®å‘ä¸Š

---

## ğŸ“Š ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼

### ç¾çŠ¶åˆ†æ
- âœ… é©åˆ‡ãªæŠ€è¡“é¸å®š(React + TypeScript + Zustand)
- âœ… æ˜ç¢ºãªè²¬å‹™åˆ†é›¢(ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã€çŠ¶æ…‹ç®¡ç†ã€ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯)
- âœ… å‹å®‰å…¨æ€§ã®é«˜ã„å®Ÿè£…
- âš ï¸ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ã®ä½™åœ°ã‚ã‚Š
- âš ï¸ ã‚³ãƒ¼ãƒ‰ã®é‡è¤‡ã¨ä¿å®ˆæ€§æ”¹å–„ã®ä½™åœ°ã‚ã‚Š

### æ”¹å–„åŠ¹æœã®è¦‹ç©ã‚‚ã‚Š
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š:** å…¥åŠ›æ™‚ã®å¿œç­”æ€§ 50-70% æ”¹å–„
- **ã‚³ãƒ¼ãƒ‰å“è³ªå‘ä¸Š:** ä¿å®ˆæ€§ã‚¹ã‚³ã‚¢ +30ç‚¹
- **é–‹ç™ºåŠ¹ç‡å‘ä¸Š:** æ–°æ©Ÿèƒ½è¿½åŠ æ™‚ã®å·¥æ•° 20-30% å‰Šæ¸›

### ç·å·¥æ•°è¦‹ç©ã‚‚ã‚Š
- **Phase 1 (ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„):** 3æ™‚é–“
- **Phase 2 (ä¿å®ˆæ€§å‘ä¸Š):** 4æ™‚é–“
- **Phase 3 (æ§‹é€ æ”¹å–„ã€ä»»æ„):** 5.5æ™‚é–“
- **åˆè¨ˆ:** 7-12.5æ™‚é–“

---

## ğŸ¯ å®Ÿè£…æ–¹é‡

### åŸºæœ¬åŸå‰‡
1. **æ®µéšçš„ãªå®Ÿè£…:** Phase 1 â†’ Phase 2 â†’ Phase 3 ã®é †ã§å®Ÿæ–½
2. **å¾Œæ–¹äº’æ›æ€§ã®ç¶­æŒ:** æ—¢å­˜æ©Ÿèƒ½ã‚’å£Šã•ãªã„
3. **ãƒ†ã‚¹ãƒˆå„ªå…ˆ:** å„Phaseå®Œäº†å¾Œã«å‹•ä½œç¢ºèª
4. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°:** ã‚³ãƒ¼ãƒ‰å¤‰æ›´ã¨åŒæ™‚ã«ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°

### å“è³ªåŸºæº–
- TypeScriptå‹ãƒã‚§ãƒƒã‚¯ã‚¨ãƒ©ãƒ¼: 0ä»¶
- ESLintã‚¨ãƒ©ãƒ¼: 0ä»¶
- ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚¨ãƒ©ãƒ¼ãƒ»è­¦å‘Š: 0ä»¶ï¼ˆæœ¬ç•ªç’°å¢ƒï¼‰
- æ—¢å­˜æ©Ÿèƒ½ã®å‹•ä½œ: 100%ç¶­æŒ

---

## ğŸ“‹ Phase 1: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„ï¼ˆå„ªå…ˆåº¦: ğŸ”´ é«˜ï¼‰

**ç›®æ¨™:** ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›æ™‚ã®å¿œç­”æ€§ã‚’50-70%æ”¹å–„
**å·¥æ•°:** 3æ™‚é–“
**æ‹…å½“é ˜åŸŸ:** `src/stores/calculatorStore.ts`, `src/App.tsx`, `src/utils/damageCalculator.ts`

### ã‚¿ã‚¹ã‚¯1.1: å†è¨ˆç®—ã®debounceåŒ–

**å„ªå…ˆåº¦:** ğŸ”´ æœ€å„ªå…ˆ
**å·¥æ•°:** 0.5æ™‚é–“
**é›£æ˜“åº¦:** ğŸŸ¢ ä½

#### ç¾çŠ¶ã®å•é¡Œ
```typescript
// stores/calculatorStore.ts:84-97
setManualAttackPower: (power) => {
  set({ manualAttackPower: power });
  setTimeout(() => get().calculateDamage(), 0); // æ¯å›å³åº§ã«è¨ˆç®—
},
```

#### å®Ÿè£…å†…å®¹

**Step 1: ä¾å­˜é–¢ä¿‚ã®è¿½åŠ **
```bash
npm install lodash-es
npm install -D @types/lodash-es
```

**Step 2: debounceé–¢æ•°ã®å®Ÿè£…**
```typescript
// src/stores/calculatorStore.ts
import { debounce } from 'lodash-es';

// ã‚¹ãƒˆã‚¢å†…ã§ debounced é–¢æ•°ã‚’ä½œæˆ
const debouncedCalculate = debounce((get) => {
  get().calculateDamage();
}, 100); // 100mså¾…æ©Ÿ

// å„ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’æ›´æ–°
setManualAttackPower: (power) => {
  set({ manualAttackPower: power });
  debouncedCalculate(get);
},

setSkillPower: (power) => {
  set({ skillPower: power });
  debouncedCalculate(get);
},

setHitCount: (count) => {
  set({ hitCount: count });
  debouncedCalculate(get);
},
```

**Step 3: setTimeout ã®å‰Šé™¤**
- `setCharacter`, `setSkill`, `setSkillLevel`, `toggleManualAttackMode`, `updateBattleSettings`, `updateAdvancedSettings` ã‹ã‚‰ `setTimeout(() => get().calculateDamage(), 0)` ã‚’å‰Šé™¤
- å³åº§ã«è¨ˆç®—ãŒå¿…è¦ãªå ´åˆã®ã¿ç›´æ¥ `get().calculateDamage()` ã‚’å‘¼ã³å‡ºã™

#### æ¤œè¨¼æ–¹æ³•
1. æ•°å€¤å…¥åŠ›æ™‚ã«è¨ˆç®—ãŒ100mså¾Œã«å®Ÿè¡Œã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
2. é€£ç¶šå…¥åŠ›æ™‚ã«ä¸è¦ãªè¨ˆç®—ãŒã‚¹ã‚­ãƒƒãƒ—ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
3. DevToolsã®Performanceã‚¿ãƒ–ã§å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å›æ•°ã‚’ç¢ºèª

#### æœŸå¾…åŠ¹æœ
- å…¥åŠ›æ™‚ã®è¨ˆç®—å›æ•°: 80-90%å‰Šæ¸›
- UIã®å¿œç­”æ€§: 50%å‘ä¸Š

---

### ã‚¿ã‚¹ã‚¯1.2: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ¡ãƒ¢åŒ–

**å„ªå…ˆåº¦:** ğŸ”´ é«˜
**å·¥æ•°:** 2æ™‚é–“
**é›£æ˜“åº¦:** ğŸŸ¡ ä¸­

#### ç¾çŠ¶ã®å•é¡Œ
```typescript
// App.tsx:11-40
function App() {
  const { /* 14å€‹ã®ã‚¹ãƒˆã‚¢å€¤ */ } = useCalculatorStore();
  // å…¨ã¦ã®çŠ¶æ…‹å¤‰æ›´ã§ App å…¨ä½“ãŒå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
}
```

#### å®Ÿè£…å†…å®¹

**Step 1: Zustand ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã®å°å…¥**
```typescript
// src/App.tsx
import React, { useCallback } from 'react';

function App() {
  const { t, i18n } = useTranslation();

  // ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã‚’ä½¿ç”¨ã—ã¦å¿…è¦ãªå€¤ã®ã¿å–å¾—
  const battleSettings = useCalculatorStore(state => state.battleSettings);
  const advancedSettings = useCalculatorStore(state => state.advancedSettings);
  const results = useCalculatorStore(state => state.results);
  const calculationSteps = useCalculatorStore(state => state.calculationSteps);
  const isDetailsDialogOpen = useCalculatorStore(state => state.isDetailsDialogOpen);

  const skillPower = useCalculatorStore(state => state.skillPower);
  const hitCount = useCalculatorStore(state => state.hitCount);
  const manualAttackPower = useCalculatorStore(state => state.manualAttackPower);

  // ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®ã¿å–å¾—
  const {
    setManualAttackPower,
    setSkillPower,
    setHitCount,
    updateBattleSettings,
    updateAdvancedSettings,
    setDetailsDialogOpen,
    getEffectiveAttackPower,
    getBarChartData,
    init,
  } = useCalculatorStore();

  // ... rest of the component
}
```

**Step 2: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ¡ãƒ¢åŒ–**
```typescript
// src/components/SettingsPanel.tsx
export const SettingsPanel = React.memo<SettingsPanelProps>(({ ... }) => {
  // ...
});

// src/components/DamageResults.tsx
export const DamageResults = React.memo<DamageResultsProps>(({ ... }) => {
  // ...
});

// src/components/DetailsDialog.tsx
export const DetailsDialog = React.memo<DetailsDialogProps>(({ ... }) => {
  // ...
});
```

**Step 3: ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã®æœ€é©åŒ–**
```typescript
// src/App.tsx
const handleLanguageChange = useCallback((lang: string) => {
  i18n.changeLanguage(lang);
}, [i18n]);

const handleDetailsClick = useCallback(() => {
  setDetailsDialogOpen(true);
}, [setDetailsDialogOpen]);

const handleDetailsClose = useCallback(() => {
  setDetailsDialogOpen(false);
}, [setDetailsDialogOpen]);
```

**Step 4: barChartData ã®æœ€é©åŒ–**
```typescript
// src/App.tsx
const barChartData = React.useMemo(() =>
  getBarChartData({
    normal: t('damage.normal'),
    critical: t('damage.critical'),
    advantage: t('damage.advantage'),
    advantageCritical: t('damage.advantageCritical')
  }),
  [getBarChartData, t]
);
```

#### æ¤œè¨¼æ–¹æ³•
1. React DevToolsã®Profilerã§å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å›æ•°ã‚’æ¸¬å®š
2. å…¥åŠ›å¤‰æ›´æ™‚ã«ä¸è¦ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œãªã„ã“ã¨ã‚’ç¢ºèª
3. `why-did-you-render` ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§è©³ç´°åˆ†æï¼ˆé–‹ç™ºæ™‚ã®ã¿ï¼‰

#### æœŸå¾…åŠ¹æœ
- ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°: 60-70%å‰Šæ¸›
- UIã®å¿œç­”æ€§: 30-40%å‘ä¸Š

---

### ã‚¿ã‚¹ã‚¯1.3: éå‰°ãªconsole.logã®å‰Šæ¸›

**å„ªå…ˆåº¦:** ğŸŸ¡ ä¸­
**å·¥æ•°:** 0.5æ™‚é–“
**é›£æ˜“åº¦:** ğŸŸ¢ ä½

#### ç¾çŠ¶ã®å•é¡Œ
```typescript
// utils/damageCalculator.ts:38-102
console.log('ğŸ” ãƒ€ãƒ¡ãƒ¼ã‚¸è¨ˆç®—é–‹å§‹');
console.log('ğŸ“Š å…¥åŠ›å€¤:', { ... });
// è¨ˆç®—ã®ãŸã³ã«12ç®‡æ‰€ã§ãƒ­ã‚°å‡ºåŠ›
```

#### å®Ÿè£…å†…å®¹

**Step 1: Logger ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã®ä½œæˆ**
```typescript
// src/utils/logger.ts
type LogLevel = 'debug' | 'info' | 'warn' | 'error';

interface Logger {
  debug: (...args: any[]) => void;
  info: (...args: any[]) => void;
  warn: (...args: any[]) => void;
  error: (...args: any[]) => void;
}

const isDev = import.meta.env.DEV;

export const logger: Logger = {
  debug: (...args: any[]) => {
    if (isDev) console.log(...args);
  },
  info: (...args: any[]) => {
    if (isDev) console.info(...args);
  },
  warn: (...args: any[]) => {
    console.warn(...args); // æœ¬ç•ªã§ã‚‚è¡¨ç¤º
  },
  error: (...args: any[]) => {
    console.error(...args); // æœ¬ç•ªã§ã‚‚è¡¨ç¤º
  },
};
```

**Step 2: damageCalculator.ts ã®æ›´æ–°**
```typescript
// src/utils/damageCalculator.ts
import { logger } from './logger';

export function calculateDamage(...) {
  logger.debug('ğŸ” ãƒ€ãƒ¡ãƒ¼ã‚¸è¨ˆç®—é–‹å§‹');
  logger.debug('ğŸ“Š å…¥åŠ›å€¤:', { ... });
  // ...
  logger.debug('âœ… ç«¯æ•°å‡¦ç†å¾Œã®æœ€çµ‚çµæœ:', finalDamages);
}
```

#### æ¤œè¨¼æ–¹æ³•
1. é–‹ç™ºç’°å¢ƒ: console.logãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
2. `import.meta.env.DEV`ãŒæ­£ã—ãæ©Ÿèƒ½ã™ã‚‹ã“ã¨ã‚’ç¢ºèª

#### æœŸå¾…åŠ¹æœ
- æœ¬ç•ªç’°å¢ƒã®console.log: 100%å‰Šæ¸›
- ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚º: 1-2KBå‰Šæ¸›

---

### Phase 1 å®Œäº†ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] ã‚¿ã‚¹ã‚¯1.1: debounceå®Ÿè£…å®Œäº†
- [ ] ã‚¿ã‚¹ã‚¯1.2: ãƒ¡ãƒ¢åŒ–å®Ÿè£…å®Œäº†
- [ ] ã‚¿ã‚¹ã‚¯1.3: loggerå®Ÿè£…å®Œäº†
- [ ] å…¨æ©Ÿèƒ½ã®å‹•ä½œç¢ºèªï¼ˆæ­£å¸¸ç³»ãƒ»ç•°å¸¸ç³»ï¼‰
- [ ] TypeScriptå‹ãƒã‚§ãƒƒã‚¯é€šé
- [ ] ESLint ã‚¨ãƒ©ãƒ¼0ä»¶
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆå®Ÿæ–½
- [ ] ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°ï¼ˆCHANGELOG.mdï¼‰

---

## ğŸ“‹ Phase 2: ä¿å®ˆæ€§å‘ä¸Šï¼ˆå„ªå…ˆåº¦: ğŸŸ¡ ä¸­ï¼‰

**ç›®æ¨™:** ã‚³ãƒ¼ãƒ‰ã®ä¿å®ˆæ€§ã¨å¯èª­æ€§ã‚’å‘ä¸Š
**å·¥æ•°:** 4æ™‚é–“
**æ‹…å½“é ˜åŸŸ:** å…¨ä½“

### ã‚¿ã‚¹ã‚¯2.1: ãƒã‚¸ãƒƒã‚¯ãƒŠãƒ³ãƒãƒ¼ã®å®šæ•°åŒ–

**å„ªå…ˆåº¦:** ğŸŸ¡ ä¸­
**å·¥æ•°:** 1æ™‚é–“
**é›£æ˜“åº¦:** ğŸŸ¢ ä½

#### å®Ÿè£…å†…å®¹

**Step 1: å®šæ•°ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ**
```typescript
// src/constants/gameConstants.ts

/**
 * ã‚²ãƒ¼ãƒ å†…ã®å›ºå®šå€¤å®šæ•°
 */
export const GAME_CONSTANTS = {
  /** ã‚¹ã‚­ãƒ«ãƒ¬ãƒ™ãƒ«é–¢é€£ */
  SKILL_LEVEL: {
    MIN: 1,
    MAX: 15,
  },

  /** ãƒ€ãƒ¡ãƒ¼ã‚¸å€ç‡ */
  DAMAGE_MULTIPLIERS: {
    /** ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ã®åŸºç¤å€ç‡ */
    CRITICAL_BASE: 1.5,
    /** æœ‰åˆ©å±æ€§ãƒ€ãƒ¡ãƒ¼ã‚¸ã®åŸºç¤å€ç‡ */
    ADVANTAGE_BASE: 1.25,
  },

  /** æ”»æ’ƒåŠ›è¨­å®š */
  ATTACK_POWER: {
    /** ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆæ”»æ’ƒåŠ› */
    DEFAULT: 1000,
    MIN: 0,
    MAX: 1000000,
  },

  /** ã‚¹ã‚­ãƒ«å¨åŠ›è¨­å®š */
  SKILL_POWER: {
    /** ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¹ã‚­ãƒ«å¨åŠ› */
    DEFAULT: 100,
    MIN: 0,
    MAX: 10000,
    /** å¨åŠ›ã‚’%ã«å¤‰æ›ã™ã‚‹é™¤æ•° */
    PERCENT_DIVISOR: 100,
  },

  /** ãƒ’ãƒƒãƒˆæ•°è¨­å®š */
  HIT_COUNT: {
    DEFAULT: 1,
    MIN: 1,
    MAX: 20,
  },

  /** å¼·åŒ–ãƒœãƒ¼ãƒŠã‚¹è¨­å®š */
  BONUS: {
    CRITICAL_MAX: 1000,
    ADVANTAGE_MAX: 1000,
    STEP: 0.01,
  },

  /** é˜²å¾¡åŠ›è¨­å®š */
  DEFENSE: {
    MIN: 0,
    MAX: 1000000,
    STEP: 10,
  },
} as const;

/** ç«¯æ•°å‡¦ç†ãƒ¢ãƒ¼ãƒ‰ */
export const ROUNDING_MODES = {
  FLOOR: 'floor',
  CEIL: 'ceil',
  ROUND: 'round',
} as const;

export type RoundingMode = typeof ROUNDING_MODES[keyof typeof ROUNDING_MODES];
```

**Step 2: æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã®ç½®ãæ›ãˆ**
```typescript
// src/stores/calculatorStore.ts
import { GAME_CONSTANTS } from '../constants/gameConstants';

setSkillLevel: (level) => {
  const state = get();
  const newLevel = Math.max(
    GAME_CONSTANTS.SKILL_LEVEL.MIN,
    Math.min(GAME_CONSTANTS.SKILL_LEVEL.MAX, level)
  );
  // ...
},

getEffectiveAttackPower: () => {
  const state = get();
  const { manualAttackPower } = state;
  return manualAttackPower !== null
    ? manualAttackPower
    : GAME_CONSTANTS.ATTACK_POWER.DEFAULT;
},
```

```typescript
// src/utils/damageCalculator.ts
import { GAME_CONSTANTS } from '../constants/gameConstants';

export function calculateDamage(...) {
  const criticalMultiplier =
    GAME_CONSTANTS.DAMAGE_MULTIPLIERS.CRITICAL_BASE +
    (criticalDamageBonus / GAME_CONSTANTS.SKILL_POWER.PERCENT_DIVISOR);

  const advantageMultiplier =
    GAME_CONSTANTS.DAMAGE_MULTIPLIERS.ADVANTAGE_BASE +
    (advantageDamageBonus / GAME_CONSTANTS.SKILL_POWER.PERCENT_DIVISOR);
  // ...
}
```

**Step 3: InputButtonã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æ›´æ–°**
```typescript
// src/components/SettingsPanel.tsx
import { GAME_CONSTANTS } from '../constants/gameConstants';

<InputButton
  label={t('battle.attackPower')}
  value={manualAttackPower || effectiveAttackPower}
  min={GAME_CONSTANTS.ATTACK_POWER.MIN}
  max={GAME_CONSTANTS.ATTACK_POWER.MAX}
  step={1}
  onValueChange={onManualAttackPowerChange}
  unit=""
/>
```

#### æ¤œè¨¼æ–¹æ³•
1. ã™ã¹ã¦ã®ãƒã‚¸ãƒƒã‚¯ãƒŠãƒ³ãƒãƒ¼ãŒå®šæ•°åŒ–ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
2. å®šæ•°å¤‰æ›´æ™‚ã«é–¢é€£ã™ã‚‹ç®‡æ‰€ãŒæ­£ã—ãå‹•ä½œã™ã‚‹ã“ã¨ã‚’ç¢ºèª
3. TypeScriptã®å‹æ¨è«–ãŒæ­£ã—ãæ©Ÿèƒ½ã™ã‚‹ã“ã¨ã‚’ç¢ºèª

---

### ã‚¿ã‚¹ã‚¯2.2: å‹å®šç¾©ã®ä¸€å…ƒåŒ–

**å„ªå…ˆåº¦:** ğŸŸ¡ ä¸­
**å·¥æ•°:** 1æ™‚é–“
**é›£æ˜“åº¦:** ğŸŸ¢ ä½

#### å®Ÿè£…å†…å®¹

**Step 1: å‹å®šç¾©ã®æ•´ç†**
```typescript
// src/types/models.ts (æ–°è¦ä½œæˆ)

/** ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼å±æ€§ */
export type AttributeType =
  | 'ã‚¢ã‚°ãƒ¬ãƒƒã‚·ãƒ–'
  | 'ã‚¹ãƒãƒ¼ãƒˆ'
  | 'ã‚·ãƒ£ã‚¤'
  | 'ã‚­ãƒ¥ãƒ¼ãƒˆ'
  | 'ã‚³ãƒŸã‚«ãƒ«'
  | 'ã‚¯ãƒ¬ãƒãƒ¼';

/** ã‚¹ã‚­ãƒ«ã‚¿ã‚¤ãƒ— */
export type SkillType = 'EX' | 'AS' | 'PS';

/** ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼æƒ…å ± */
export interface Character {
  id: string;
  name: string;
  attribute: AttributeType;
  rarity: number;
  attack: number;
  detail_link: string;
  skills?: Skill[];
}

/** ã‚¹ã‚­ãƒ«æƒ…å ± */
export interface Skill {
  id: string;
  name: string;
  type: SkillType;
  power_lv1: number;
  power_lv15: number;
  power_per_level: number[];
  hit_count: number;
}
```

**Step 2: characterData.ts ã®æ›´æ–°**
```typescript
// src/characterData.ts
import type { Character, Skill } from './types/models';

// å‹å®šç¾©ã¯å‰Šé™¤ã€ãƒ‡ãƒ¼ã‚¿ã®ã¿ä¿æŒ
export const characters: Character[] = [
  // ...
];
```

**Step 3: types/index.ts ã®æ›´æ–°**
```typescript
// src/types/index.ts
// ãƒ¢ãƒ‡ãƒ«å‹ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
export type { Character, Skill, AttributeType, SkillType } from './models';

// æ—¢å­˜ã®å‹å®šç¾©ï¼ˆBattleSettings, DamageResultsç­‰ï¼‰ã¯ãã®ã¾ã¾
```

#### æ¤œè¨¼æ–¹æ³•
1. å…¨ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ–‡ãŒæ­£ã—ãå‹•ä½œã™ã‚‹ã“ã¨ã‚’ç¢ºèª
2. TypeScriptå‹ãƒã‚§ãƒƒã‚¯ã‚¨ãƒ©ãƒ¼ãŒãªã„ã“ã¨ã‚’ç¢ºèª
3. IDE ã®å‹è£œå®ŒãŒæ­£ã—ãæ©Ÿèƒ½ã™ã‚‹ã“ã¨ã‚’ç¢ºèª

---

### ã‚¿ã‚¹ã‚¯2.3: é‡è¤‡ã‚³ãƒ¼ãƒ‰ã®å‰Šé™¤ã¨ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£åŒ–

**å„ªå…ˆåº¦:** ğŸŸ¡ ä¸­
**å·¥æ•°:** 1æ™‚é–“
**é›£æ˜“åº¦:** ğŸŸ¢ ä½

#### å®Ÿè£…å†…å®¹

**Step 1: ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã®ä½œæˆ**
```typescript
// src/utils/formatters.ts

/**
 * æ•°å€¤ã‚’å˜ä½ä»˜ãã§ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
 */
export const formatValue = (val: number, unit?: string): string => {
  return unit ? `${val}${unit}` : val.toString();
};

/**
 * æ•°å€¤ã‚’3æ¡åŒºåˆ‡ã‚Šã§ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
 */
export const formatNumber = (value: number): string => {
  return Math.floor(value).toLocaleString();
};

/**
 * å°æ•°ç‚¹ä»¥ä¸‹ã‚’æŒ‡å®šæ¡æ•°ã§ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
 */
export const formatDecimal = (value: number, digits: number = 2): string => {
  return value.toFixed(digits);
};

/**
 * ãƒ‘ãƒ¼ã‚»ãƒ³ãƒˆè¡¨ç¤ºç”¨ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
 */
export const formatPercent = (value: number, digits: number = 1): string => {
  return `${value.toFixed(digits)}%`;
};
```

**Step 2: æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã®ç½®ãæ›ãˆ**
```typescript
// src/components/InputButton.tsx
import { formatValue } from '../utils/formatters';

export const InputButton: React.FC<InputButtonProps> = ({ ... }) => {
  // formatValueé–¢æ•°ã‚’å‰Šé™¤

  return (
    <div className={`space-y-2 ${className}`}>
      <div className="flex items-center justify-between">
        <Label htmlFor={`input-${label}`}>
          {label}
        </Label>
        <span className="text-sm text-muted-foreground">
          {formatValue(value, unit)}
        </span>
      </div>
      {/* ... */}
    </div>
  );
};
```

```typescript
// src/components/DamageResults.tsx
import { formatNumber, formatDecimal } from '../utils/formatters';

export const DamageResults: React.FC<DamageResultsProps> = ({ ... }) => {
  // formatNumberé–¢æ•°ã‚’å‰Šé™¤

  return (
    // formatNumber, formatDecimal ã‚’ä½¿ç”¨
  );
};
```

#### æ¤œè¨¼æ–¹æ³•
1. ã™ã¹ã¦ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆé–¢æ•°ãŒæ­£ã—ãå‹•ä½œã™ã‚‹ã“ã¨ã‚’ç¢ºèª
2. é‡è¤‡ã‚³ãƒ¼ãƒ‰ãŒå‰Šé™¤ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
3. ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ï¼ˆnull, undefined, æ¥µç«¯ãªå€¤ï¼‰ã®ãƒ†ã‚¹ãƒˆ

---

### ã‚¿ã‚¹ã‚¯2.4: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®è¿½åŠ 

**å„ªå…ˆåº¦:** ğŸŸ¡ ä¸­
**å·¥æ•°:** 1æ™‚é–“
**é›£æ˜“åº¦:** ğŸŸ¢ ä½

#### å®Ÿè£…å†…å®¹

**Step 1: ã‚«ã‚¹ã‚¿ãƒ ã‚¨ãƒ©ãƒ¼ã‚¯ãƒ©ã‚¹ã®ä½œæˆ**
```typescript
// src/utils/errors.ts

/**
 * ãƒ€ãƒ¡ãƒ¼ã‚¸è¨ˆç®—ã‚¨ãƒ©ãƒ¼ã®åŸºåº•ã‚¯ãƒ©ã‚¹
 */
export class DamageCalculationError extends Error {
  constructor(message: string) {
    super(message);
    this.name = 'DamageCalculationError';
  }
}

/**
 * ä¸æ­£ãªã‚¹ã‚­ãƒ«ãƒ¬ãƒ™ãƒ«ã‚¨ãƒ©ãƒ¼
 */
export class InvalidSkillLevelError extends DamageCalculationError {
  constructor(level: number) {
    super(`Invalid skill level: ${level}. Must be between 1 and 15`);
    this.name = 'InvalidSkillLevelError';
  }
}

/**
 * ã‚¹ã‚­ãƒ«ãƒ‡ãƒ¼ã‚¿ä¸è¶³ã‚¨ãƒ©ãƒ¼
 */
export class MissingSkillDataError extends DamageCalculationError {
  constructor(skillId: string, level: number) {
    super(`No power data for skill ${skillId} at level ${level}`);
    this.name = 'MissingSkillDataError';
  }
}
```

**Step 2: damageCalculator.ts ã®æ›´æ–°**
```typescript
// src/utils/damageCalculator.ts
import { logger } from './logger';
import { InvalidSkillLevelError, MissingSkillDataError } from './errors';
import { GAME_CONSTANTS } from '../constants/gameConstants';

/**
 * ã‚¹ã‚­ãƒ«å¨åŠ›è¨ˆç®—ï¼ˆã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å¼·åŒ–ç‰ˆï¼‰
 */
export function getSkillPowerAtLevel(skill: Skill, level: number): number {
  // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
  if (!skill) {
    logger.error('Skill is required');
    throw new Error('Skill is required');
  }

  const { MIN, MAX } = GAME_CONSTANTS.SKILL_LEVEL;
  if (level < MIN || level > MAX) {
    throw new InvalidSkillLevelError(level);
  }

  // ã‚¹ã‚­ãƒ«å¨åŠ›å–å¾—
  const skillPower = skill.power_per_level[level - 1];

  if (skillPower === undefined || skillPower === null) {
    logger.warn(`No power data for skill ${skill.id} at level ${level}`);
    throw new MissingSkillDataError(skill.id, level);
  }

  return skillPower;
}

/**
 * ãƒ€ãƒ¡ãƒ¼ã‚¸è¨ˆç®—ï¼ˆã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°è¿½åŠ ï¼‰
 */
export function calculateDamage(...args): { results: DamageResults; steps: CalculationSteps } {
  try {
    // æ—¢å­˜ã®è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯
    // ...

    return { results, steps };
  } catch (error) {
    logger.error('Damage calculation failed:', error);

    // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’è¿”ã™ï¼ˆè¨ˆç®—å¤±æ•—æ™‚ï¼‰
    const fallbackResults: DamageResults = {
      totalAttack: 0,
      enemyDefense: 0,
      baseDamage: 0,
      criticalMultiplier: GAME_CONSTANTS.DAMAGE_MULTIPLIERS.CRITICAL_BASE,
      advantageMultiplier: GAME_CONSTANTS.DAMAGE_MULTIPLIERS.ADVANTAGE_BASE,
      finalDamages: {
        normal: 0,
        critical: 0,
        advantageNormal: 0,
        advantageCritical: 0,
      },
    };

    const fallbackSteps: CalculationSteps = {
      /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ */
    };

    return { results: fallbackResults, steps: fallbackSteps };
  }
}
```

**Step 3: ã‚¹ãƒˆã‚¢ã§ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**
```typescript
// src/stores/calculatorStore.ts
import { logger } from '../utils/logger';

calculateDamage: () => {
  try {
    const state = get();
    // ...

    const { results, steps } = calculateDamage(/* ... */);
    set({ results, calculationSteps: steps });
  } catch (error) {
    logger.error('Failed to calculate damage:', error);

    // ã‚¨ãƒ©ãƒ¼æ™‚ã¯UIã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’è¡¨ç¤º
    set({
      results: null,
      calculationSteps: null
    });
  }
},
```

#### æ¤œè¨¼æ–¹æ³•
1. ä¸æ­£ãªã‚¹ã‚­ãƒ«ãƒ¬ãƒ™ãƒ«å…¥åŠ›æ™‚ã«ã‚¨ãƒ©ãƒ¼ãŒé©åˆ‡ã«ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
2. ã‚¹ã‚­ãƒ«ãƒ‡ãƒ¼ã‚¿ä¸è¶³æ™‚ã«è­¦å‘Šãƒ­ã‚°ãŒå‡ºåŠ›ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
3. è¨ˆç®—å¤±æ•—æ™‚ã«ã‚¢ãƒ—ãƒªãŒã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã—ãªã„ã“ã¨ã‚’ç¢ºèª

---

### Phase 2 å®Œäº†ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] ã‚¿ã‚¹ã‚¯2.1: å®šæ•°åŒ–å®Œäº†
- [ ] ã‚¿ã‚¹ã‚¯2.2: å‹å®šç¾©ä¸€å…ƒåŒ–å®Œäº†
- [ ] ã‚¿ã‚¹ã‚¯2.3: ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£åŒ–å®Œäº†
- [ ] ã‚¿ã‚¹ã‚¯2.4: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å®Œäº†
- [ ] å…¨æ©Ÿèƒ½ã®å‹•ä½œç¢ºèª
- [ ] TypeScriptå‹ãƒã‚§ãƒƒã‚¯é€šé
- [ ] ESLint ã‚¨ãƒ©ãƒ¼0ä»¶
- [ ] ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°

---

## ğŸ“‹ Phase 3: æ§‹é€ æ”¹å–„ï¼ˆå„ªå…ˆåº¦: ğŸ”µ ä½ã€ä»»æ„ï¼‰

**ç›®æ¨™:** ã‚³ãƒ¼ãƒ‰ã®æ§‹é€ ã‚’æ”¹å–„ã—ã€é•·æœŸçš„ãªä¿å®ˆæ€§ã‚’å‘ä¸Š
**å·¥æ•°:** 5.5æ™‚é–“
**æ‹…å½“é ˜åŸŸ:** å…¨ä½“ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ã‚¿ã‚¹ã‚¯3.1: ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã®æŠ½å‡º

**å„ªå…ˆåº¦:** ğŸ”µ ä½
**å·¥æ•°:** 0.5æ™‚é–“
**é›£æ˜“åº¦:** ğŸŸ¢ ä½

#### å®Ÿè£…å†…å®¹

**Step 1: useLanguage ãƒ•ãƒƒã‚¯ã®ä½œæˆ**
```typescript
// src/hooks/useLanguage.ts
import { useCallback } from 'react';
import { useTranslation } from 'react-i18next';

/**
 * å¤šè¨€èªåˆ‡ã‚Šæ›¿ãˆç”¨ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
 */
export const useLanguage = () => {
  const { i18n } = useTranslation();

  const changeLanguage = useCallback((lang: string) => {
    i18n.changeLanguage(lang);
  }, [i18n]);

  return {
    currentLanguage: i18n.language,
    changeLanguage,
    availableLanguages: ['ja', 'en', 'zh'] as const,
  };
};
```

**Step 2: App.tsx ã§ã®ä½¿ç”¨**
```typescript
// src/App.tsx
import { useLanguage } from './hooks/useLanguage';

function App() {
  const { t } = useTranslation();
  const { currentLanguage, changeLanguage } = useLanguage();

  // ...

  <Select value={currentLanguage} onValueChange={changeLanguage}>
    {/* ... */}
  </Select>
}
```

---

### ã‚¿ã‚¹ã‚¯3.2: ã‚¹ãƒˆã‚¢ã®ã‚¹ãƒ©ã‚¤ã‚¹åŒ–

**å„ªå…ˆåº¦:** ğŸ”µ ä½
**å·¥æ•°:** 3æ™‚é–“
**é›£æ˜“åº¦:** ğŸŸ¡ ä¸­

#### å®Ÿè£…å†…å®¹

**Step 1: ã‚¹ãƒ©ã‚¤ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ**
```typescript
// src/stores/slices/battleSettingsSlice.ts
import type { StateCreator } from 'zustand';
import type { CalculatorStore } from '../../types';

export interface BattleSettingsSlice {
  battleSettings: BattleSettings;
  updateBattleSettings: (settings: Partial<BattleSettings>) => void;
}

export const createBattleSettingsSlice: StateCreator<
  CalculatorStore,
  [],
  [],
  BattleSettingsSlice
> = (set, get) => ({
  battleSettings: defaultBattleSettings,

  updateBattleSettings: (settings) => {
    set((state) => ({
      battleSettings: { ...state.battleSettings, ...settings },
    }));
    get().calculateDamage();
  },
});
```

```typescript
// src/stores/slices/calculationSlice.ts
import type { StateCreator } from 'zustand';
import { calculateDamage } from '../../utils/damageCalculator';
import type { CalculatorStore } from '../../types';

export interface CalculationSlice {
  results: DamageResults | null;
  calculationSteps: CalculationSteps | null;
  calculateDamage: () => void;
  getBarChartData: (labels?: {...}) => BarChartData[];
}

export const createCalculationSlice: StateCreator<
  CalculatorStore,
  [],
  [],
  CalculationSlice
> = (set, get) => ({
  results: null,
  calculationSteps: null,

  calculateDamage: () => {
    // è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯
  },

  getBarChartData: (labels) => {
    // ã‚°ãƒ©ãƒ•ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ
  },
});
```

**Step 2: ãƒ¡ã‚¤ãƒ³ã‚¹ãƒˆã‚¢ã®çµ±åˆ**
```typescript
// src/stores/calculatorStore.ts
import { create } from 'zustand';
import { devtools } from 'zustand/middleware';
import { createBattleSettingsSlice } from './slices/battleSettingsSlice';
import { createCalculationSlice } from './slices/calculationSlice';
import { createInputSlice } from './slices/inputSlice';
import { createUISlice } from './slices/uiSlice';

export const useCalculatorStore = create<CalculatorStore>()(
  devtools(
    (...a) => ({
      ...createBattleSettingsSlice(...a),
      ...createCalculationSlice(...a),
      ...createInputSlice(...a),
      ...createUISlice(...a),
    }),
    { name: 'calculator-store' }
  )
);
```

#### æ¤œè¨¼æ–¹æ³•
1. ã™ã¹ã¦ã®æ©Ÿèƒ½ãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹ã“ã¨ã‚’ç¢ºèª
2. Zustand DevToolsã§çŠ¶æ…‹ãŒæ­£ã—ãç®¡ç†ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
3. å‹å®‰å…¨æ€§ãŒä¿ãŸã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª

---

### ã‚¿ã‚¹ã‚¯3.3: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆéšå±¤ã®æœ€é©åŒ–

**å„ªå…ˆåº¦:** ğŸ”µ ä½
**å·¥æ•°:** 2æ™‚é–“
**é›£æ˜“åº¦:** ğŸŸ¡ ä¸­

#### å®Ÿè£…å†…å®¹

**Step 1: ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ä½œæˆ**
```typescript
// src/layouts/MainLayout.tsx
import React from 'react';

interface MainLayoutProps {
  children: React.ReactNode;
}

export const MainLayout: React.FC<MainLayoutProps> = ({ children }) => {
  return (
    <div className="min-h-screen bg-background">
      {children}
    </div>
  );
};
```

```typescript
// src/layouts/Header.tsx
import React from 'react';
import { Globe } from 'lucide-react';
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '../components/ui/select';
import { useLanguage } from '../hooks/useLanguage';
import { useTranslation } from 'react-i18next';

export const Header: React.FC = () => {
  const { t } = useTranslation();
  const { currentLanguage, changeLanguage } = useLanguage();

  return (
    <header className="border-b bg-card">
      <div className="container mx-auto px-4 py-4">
        <div className="flex items-center justify-between">
          <h1 className="text-2xl font-bold text-primary">
            {t('app.title')}
          </h1>
          <div className="flex items-center gap-2">
            <Globe className="w-4 h-4 text-muted-foreground" />
            <Select value={currentLanguage} onValueChange={changeLanguage}>
              <SelectTrigger className="w-20">
                <SelectValue />
              </SelectTrigger>
              <SelectContent>
                <SelectItem value="ja">æ—¥æœ¬èª</SelectItem>
                <SelectItem value="en">English</SelectItem>
                <SelectItem value="zh">ä¸­æ–‡</SelectItem>
              </SelectContent>
            </Select>
          </div>
        </div>
      </div>
    </header>
  );
};
```

**Step 2: Feature ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ä½œæˆ**
```typescript
// src/features/DamageCalculator/index.tsx
import React from 'react';
import { SettingsPanelContainer } from './SettingsPanelContainer';
import { DamageResultsContainer } from './DamageResultsContainer';

export const DamageCalculator: React.FC = () => {
  return (
    <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
      <SettingsPanelContainer />
      <DamageResultsContainer />
    </div>
  );
};
```

**Step 3: App.tsx ã®ç°¡ç´ åŒ–**
```typescript
// src/App.tsx
import React from 'react';
import { MainLayout } from './layouts/MainLayout';
import { Header } from './layouts/Header';
import { DamageCalculator } from './features/DamageCalculator';
import { DetailsDialog } from './components/DetailsDialog';
import { useCalculatorStore } from './stores/calculatorStore';
import './utils/i18n';

function App() {
  const { init } = useCalculatorStore();

  React.useEffect(() => {
    init();
  }, [init]);

  return (
    <MainLayout>
      <Header />
      <main className="container mx-auto px-4 py-6">
        <DamageCalculator />
      </main>
      <DetailsDialog />
    </MainLayout>
  );
}

export default App;
```

#### æ¤œè¨¼æ–¹æ³•
1. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆéšå±¤ãŒé©åˆ‡ã«åˆ†é›¢ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
2. å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®è²¬å‹™ãŒæ˜ç¢ºã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª
3. ã™ã¹ã¦ã®æ©Ÿèƒ½ãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹ã“ã¨ã‚’ç¢ºèª

---

### Phase 3 å®Œäº†ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] ã‚¿ã‚¹ã‚¯3.1: ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯æŠ½å‡ºå®Œäº†
- [ ] ã‚¿ã‚¹ã‚¯3.2: ã‚¹ãƒˆã‚¢ã‚¹ãƒ©ã‚¤ã‚¹åŒ–å®Œäº†
- [ ] ã‚¿ã‚¹ã‚¯3.3: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆéšå±¤æœ€é©åŒ–å®Œäº†
- [ ] å…¨æ©Ÿèƒ½ã®å‹•ä½œç¢ºèª
- [ ] TypeScriptå‹ãƒã‚§ãƒƒã‚¯é€šé
- [ ] ESLint ã‚¨ãƒ©ãƒ¼0ä»¶
- [ ] ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°

---

## ğŸ“Š ãƒ†ã‚¹ãƒˆè¨ˆç”»

### ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ª

#### æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
1. **ãƒ€ãƒ¡ãƒ¼ã‚¸è¨ˆç®—ã®æ­£ç¢ºæ€§**
   - [ ] é€šå¸¸ãƒ€ãƒ¡ãƒ¼ã‚¸è¨ˆç®—
   - [ ] ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸è¨ˆç®—
   - [ ] æœ‰åˆ©å±æ€§ãƒ€ãƒ¡ãƒ¼ã‚¸è¨ˆç®—
   - [ ] æœ‰åˆ©ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸è¨ˆç®—

2. **å…¥åŠ›å€¤ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³**
   - [ ] æœ€å°å€¤ãƒ»æœ€å¤§å€¤ãƒã‚§ãƒƒã‚¯
   - [ ] æ•°å€¤ä»¥å¤–ã®å…¥åŠ›æ‹’å¦
   - [ ] å¢ƒç•Œå€¤ãƒ†ã‚¹ãƒˆ

3. **è¨€èªåˆ‡ã‚Šæ›¿ãˆ**
   - [ ] æ—¥æœ¬èªâ†’è‹±èªâ†’ä¸­å›½èªã®åˆ‡ã‚Šæ›¿ãˆ
   - [ ] ç¿»è¨³ã®æ­£ç¢ºæ€§ç¢ºèª

#### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
1. **ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**
   - [ ] åˆå›ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ™‚é–“
   - [ ] å…¥åŠ›æ™‚ã®å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å›æ•°
   - [ ] ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡

2. **è¨ˆç®—ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**
   - [ ] è¨ˆç®—å®Ÿè¡Œæ™‚é–“
   - [ ] é€£ç¶šå…¥åŠ›æ™‚ã®å‡¦ç†é€Ÿåº¦

#### ãƒ–ãƒ©ã‚¦ã‚¶äº’æ›æ€§ãƒ†ã‚¹ãƒˆ
- [ ] Chrome (æœ€æ–°ç‰ˆ)
- [ ] Firefox (æœ€æ–°ç‰ˆ)
- [ ] Safari (æœ€æ–°ç‰ˆ)
- [ ] Edge (æœ€æ–°ç‰ˆ)

#### ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ†ã‚¹ãƒˆ
- [ ] ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ— (1920x1080)
- [ ] ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆ (768x1024)
- [ ] ãƒ¢ãƒã‚¤ãƒ« (375x667)

---

## ğŸ“ˆ å“è³ªãƒ¡ãƒˆãƒªã‚¯ã‚¹

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æŒ‡æ¨™

| æŒ‡æ¨™ | ç¾çŠ¶ | ç›®æ¨™ | æ¸¬å®šæ–¹æ³• |
|------|------|------|----------|
| åˆå›ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ™‚é–“ | - | < 1ç§’ | Lighthouse |
| å…¥åŠ›å¿œç­”æ™‚é–“ | - | < 100ms | React DevTools Profiler |
| å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å›æ•° | - | 30%å‰Šæ¸› | React DevTools Profiler |
| ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚º | - | < 300KB (gzip) | Vite build |

### ã‚³ãƒ¼ãƒ‰å“è³ªæŒ‡æ¨™

| æŒ‡æ¨™ | ç¾çŠ¶ | ç›®æ¨™ | æ¸¬å®šæ–¹æ³• |
|------|------|------|----------|
| TypeScriptã‚¨ãƒ©ãƒ¼ | 0 | 0 | tsc --noEmit |
| ESLintã‚¨ãƒ©ãƒ¼ | 0 | 0 | npm run lint |
| ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸ | - | > 70% | Vitest (å°†æ¥) |
| å¾ªç’°çš„è¤‡é›‘åº¦ | - | < 10 | ESLint complexity |

---

## ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆè¨ˆç”»

### ãƒªãƒªãƒ¼ã‚¹æ‰‹é †

#### 1. Phase 1 ãƒªãƒªãƒ¼ã‚¹ (v1.1.0)
```bash
# 1. ãƒ–ãƒ©ãƒ³ãƒä½œæˆ
git checkout -b feature/refactoring-phase1

# 2. å®Ÿè£…
# ã‚¿ã‚¹ã‚¯1.1-1.3ã‚’å®Ÿæ–½

# 3. ãƒ†ã‚¹ãƒˆ
npm run typecheck
npm run lint

# 4. ã‚³ãƒŸãƒƒãƒˆ
git add .
git commit -m "feat: Phase 1 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„

- debounceå°å…¥ã§å…¥åŠ›æ™‚ã®è¨ˆç®—ã‚’æœ€é©åŒ–
- ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ¡ãƒ¢åŒ–ã§å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å‰Šæ¸›
- loggerå°å…¥ã§æœ¬ç•ªç’°å¢ƒã®ãƒ­ã‚°å‰Šæ¸›"

# 5. ãƒãƒ¼ã‚¸
git checkout main
git merge feature/refactoring-phase1
git tag v1.1.0
git push origin main --tags
```

#### 2. Phase 2 ãƒªãƒªãƒ¼ã‚¹ (v1.2.0)
```bash
git checkout -b feature/refactoring-phase2
# å®Ÿè£…ãƒ»ãƒ†ã‚¹ãƒˆãƒ»ã‚³ãƒŸãƒƒãƒˆ
git checkout main
git merge feature/refactoring-phase2
git tag v1.2.0
git push origin main --tags
```

#### 3. Phase 3 ãƒªãƒªãƒ¼ã‚¹ (v1.3.0ã€ä»»æ„)
```bash
git checkout -b feature/refactoring-phase3
# å®Ÿè£…ãƒ»ãƒ†ã‚¹ãƒˆãƒ»ã‚³ãƒŸãƒƒãƒˆ
git checkout main
git merge feature/refactoring-phase3
git tag v1.3.0
git push origin main --tags
```

### ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯è¨ˆç”»

å„Phaseã§å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆ:
```bash
# ã‚¿ã‚°ã«æˆ»ã™
git checkout v1.0.0

# ã¾ãŸã¯ç›´å‰ã®ã‚³ãƒŸãƒƒãƒˆã«æˆ»ã™
git revert HEAD
```

---

## ğŸ“ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°

### æ›´æ–°å¯¾è±¡ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

1. **CHANGELOG.md** (æ–°è¦ä½œæˆ)
```markdown
# Changelog

## [1.3.0] - 2025-01-XX (Phase 3)
### Changed
- ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆéšå±¤ã®æœ€é©åŒ–
- ã‚¹ãƒˆã‚¢ã®ã‚¹ãƒ©ã‚¤ã‚¹åŒ–
- ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã®æŠ½å‡º

## [1.2.0] - 2025-01-XX (Phase 2)
### Added
- ã‚²ãƒ¼ãƒ å®šæ•°ã®ä¸€å…ƒç®¡ç†
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°æ©Ÿèƒ½
- ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°ã®è¿½åŠ 

### Changed
- å‹å®šç¾©ã®ä¸€å…ƒåŒ–
- é‡è¤‡ã‚³ãƒ¼ãƒ‰ã®å‰Šé™¤

## [1.1.0] - 2025-01-XX (Phase 1)
### Added
- debounce ã«ã‚ˆã‚‹å†è¨ˆç®—ã®æœ€é©åŒ–
- logger ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã®è¿½åŠ 

### Changed
- ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ¡ãƒ¢åŒ–ã«ã‚ˆã‚‹ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„
- æœ¬ç•ªç’°å¢ƒã®console.logå‰Šæ¸›

## [1.0.0] - 2025-01-04
### Added
- åˆå›ãƒªãƒªãƒ¼ã‚¹
```

2. **README.md**
   - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„å†…å®¹ã®è¿½è¨˜
   - æ–°ã—ã„å®šæ•°ãƒ•ã‚¡ã‚¤ãƒ«ã®èª¬æ˜è¿½åŠ 

3. **DIRECTORY_STRUCTURE.md**
   - æ–°ã—ã„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã®åæ˜ 
   - constants/, hooks/ ãƒ•ã‚©ãƒ«ãƒ€ã®èª¬æ˜è¿½åŠ 

---

## ğŸ¯ æˆåŠŸåŸºæº–

### Phase 1 æˆåŠŸåŸºæº–
- âœ… å…¥åŠ›æ™‚ã®è¨ˆç®—å›æ•°ãŒ80%ä»¥ä¸Šå‰Šæ¸›
- âœ… å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å›æ•°ãŒ60%ä»¥ä¸Šå‰Šæ¸›
- âœ… æœ¬ç•ªç’°å¢ƒã§debugãƒ­ã‚°ãŒ0ä»¶
- âœ… ã™ã¹ã¦ã®æ—¢å­˜æ©Ÿèƒ½ãŒæ­£å¸¸å‹•ä½œ

### Phase 2 æˆåŠŸåŸºæº–
- âœ… ãƒã‚¸ãƒƒã‚¯ãƒŠãƒ³ãƒãƒ¼ãŒå®šæ•°åŒ–ã•ã‚Œã¦ã„ã‚‹
- âœ… å‹å®šç¾©ãŒä¸€å…ƒåŒ–ã•ã‚Œã¦ã„ã‚‹
- âœ… é‡è¤‡ã‚³ãƒ¼ãƒ‰ãŒå‰Šé™¤ã•ã‚Œã¦ã„ã‚‹
- âœ… ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹

### Phase 3 æˆåŠŸåŸºæº–
- âœ… ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆéšå±¤ãŒæœ€é©åŒ–ã•ã‚Œã¦ã„ã‚‹
- âœ… ã‚¹ãƒˆã‚¢ãŒã‚¹ãƒ©ã‚¤ã‚¹åŒ–ã•ã‚Œã¦ã„ã‚‹
- âœ… ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ãŒé©åˆ‡ã«æŠ½å‡ºã•ã‚Œã¦ã„ã‚‹

---

## ğŸ“… ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

### æ¨å¥¨å®Ÿè£…ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

| Phase | æœŸé–“ | æ‹…å½“ | å‚™è€ƒ |
|-------|------|------|------|
| Phase 1 | 1æ—¥ç›® | é–‹ç™ºè€… | æœ€å„ªå…ˆã§å®Ÿæ–½ |
| Phase 2 | 2-3æ—¥ç›® | é–‹ç™ºè€… | Phase 1å®Œäº†å¾Œ |
| Phase 3 | 4-5æ—¥ç›® | é–‹ç™ºè€… | ä»»æ„å®Ÿæ–½ |
| ãƒ†ã‚¹ãƒˆãƒ»QA | 6æ—¥ç›® | QAæ‹…å½“ | å…¨Phaseå®Œäº†å¾Œ |
| ãƒªãƒªãƒ¼ã‚¹ | 7æ—¥ç›® | DevOps | ãƒ‡ãƒ—ãƒ­ã‚¤å®Ÿæ–½ |

---

## ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºç­–

#### 1. debounceå°å…¥å¾Œã«è¨ˆç®—ãŒé…å»¶ã™ã‚‹
**åŸå› :** debounceæ™‚é–“ãŒé•·ã™ãã‚‹
**è§£æ±ºç­–:** `debounce(fn, 100)` ã®100msã‚’èª¿æ•´ï¼ˆ50-150msï¼‰

#### 2. ãƒ¡ãƒ¢åŒ–å¾Œã‚‚å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãŒç™ºç”Ÿã™ã‚‹
**åŸå› :** ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ãŒæ¯å›æ–°ã—ã„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿”ã—ã¦ã„ã‚‹
**è§£æ±ºç­–:** shallow equality check ã‚’ä½¿ç”¨
```typescript
import { shallow } from 'zustand/shallow';
const { value1, value2 } = useCalculatorStore(
  state => ({ value1: state.value1, value2: state.value2 }),
  shallow
);
```

#### 3. å®šæ•°å¤‰æ›´å¾Œã«ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼
**åŸå› :** importæ–‡ã®æ›´æ–°æ¼ã‚Œ
**è§£æ±ºç­–:** IDEã®è‡ªå‹•ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ©Ÿèƒ½ã‚’ä½¿ç”¨ã€ã¾ãŸã¯grepæ¤œç´¢

#### 4. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°è¿½åŠ å¾Œã«å‹ã‚¨ãƒ©ãƒ¼
**åŸå› :** æˆ»ã‚Šå€¤ã®å‹ãŒå¤‰æ›´ã•ã‚Œã¦ã„ã‚‹
**è§£æ±ºç­–:** å‹å®šç¾©ã‚’ç¢ºèªã—ã€å¿…è¦ã«å¿œã˜ã¦æ›´æ–°

---

## ğŸ“š å‚è€ƒè³‡æ–™

### å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [React å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://react.dev/)
- [Zustand ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://github.com/pmndrs/zustand)
- [TypeScript ãƒãƒ³ãƒ‰ãƒ–ãƒƒã‚¯](https://www.typescriptlang.org/docs/)
- [Vite ã‚¬ã‚¤ãƒ‰](https://vitejs.dev/guide/)

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- [React Performance Optimization](https://react.dev/learn/render-and-commit)
- [Zustand Best Practices](https://github.com/pmndrs/zustand#best-practices)

### ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„
- [Airbnb JavaScript Style Guide](https://github.com/airbnb/javascript)
- [Google TypeScript Style Guide](https://google.github.io/styleguide/tsguide.html)

---

## âœ… æœ€çµ‚ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### å®Ÿè£…å‰ç¢ºèª
- [ ] ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å…¨ã¦èª­ã‚“ã 
- [ ] ç¾åœ¨ã®ã‚³ãƒ¼ãƒ‰ã‚’ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã—ãŸ
- [ ] git status ãŒã‚¯ãƒªãƒ¼ãƒ³ãªçŠ¶æ…‹
- [ ] ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒæœ€æ–°

### å®Ÿè£…ä¸­ç¢ºèª
- [ ] å„ã‚¿ã‚¹ã‚¯å®Œäº†å¾Œã«ã‚³ãƒŸãƒƒãƒˆ
- [ ] TypeScriptå‹ãƒã‚§ãƒƒã‚¯ãŒé€šã‚‹
- [ ] ESLintã‚¨ãƒ©ãƒ¼ãŒ0ä»¶
- [ ] æ‰‹å‹•ãƒ†ã‚¹ãƒˆã‚’å®Ÿæ–½

### å®Ÿè£…å¾Œç¢ºèª
- [ ] ã™ã¹ã¦ã®æ©Ÿèƒ½ãŒæ­£å¸¸å‹•ä½œ
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆå®Ÿæ–½
- [ ] ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°å®Œäº†
- [ ] CHANGELOG.md æ›´æ–°
- [ ] git tag ä»˜ä¸

---

**ä½œæˆè€…:** Claude Code
**æœ€çµ‚æ›´æ–°:** 2025-10-04
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³:** 1.0.0
