# ゲームのダメージ計算ウェブアプリ：全体計画書 (最終更新版)

**1. プロジェクト概要**

*   **目的**: ユーザーがゲームキャラクター、攻撃スキル、スキルレベル、敵の防御値、属性相性、ギアカスタム（会心ダメージ増加、有利属性ダメージ増加）を入力することで、複数のダメージパターン（通常、会心、有利属性通常、有利属性会心）を計算し表示するウェブアプリケーションを開発します。
*   **対象ユーザー**: ゲームプレイヤー、開発者など、ゲームのダメージ計算に関心のある方々。
*   **主な機能**:
    *   キャラクター選択機能
    *   キャラクターに応じた攻撃スキルの選択機能
    *   スキルレベル入力機能（スキルごとに攻撃倍率が変動）
    *   敵の防御値入力機能
    *   属性相性選択機能
    *   ギアカスタムによる会心ダメージ増加率入力機能
    *   ギアカアカスタムによる有利属性ダメージ増加率入力機能
    *   複数のダメージパターン（通常ダメージ、会心ダメージ、有利属性通常ダメージ、有利属性会心ダメージ）の計算と表示
    *   **日本語、英語、中国語の3言語切り替え機能**

**2. ダメージ計算式**

*   本アプリでは、「アルテリオス計算式」をベースに、以下の要素を組み込んだダメージ計算を行います。
*   **基本計算式**: `基礎ダメージ = 攻撃力 - 防御力`
    *   `攻撃力` は、キャラクターの基本攻撃力に、選択されたスキルの攻撃倍率（スキルレベルに応じて変動）を乗算して算出されます。
*   **ダメージ乗算要素**:
    *   **属性相性**: 有利属性の場合、最終ダメージに `1.25倍` を乗算します。
    *   **会心ダメージ**: 会心発動時、最終ダメージに `1.5倍` を乗算します。
    *   **ギアカスタム (会心ダメージ増加)**: 会心ダメージ発生時、基礎倍率 `1.5` に入力された増加率を加算します。
        *   例: 会心ダメージ増加10%の場合、`1.5 + 0.1 = 1.6倍`
    *   **ギアカスタム (有利属性ダメージ増加)**: 有利属性ダメージ発生時、基礎倍率 `1.25` に入力された増加率を加算します。
        *   例: 有利属性ダメージ増加10%の場合、`1.25 + 0.1 = 1.35倍`
*   **出力されるダメージパターン**:
    1.  **通常ダメージ**: `基礎ダメージ`
    2.  **会心ダメージ**: `基礎ダメージ * (1.5 + ギアカスタム会心ダメージ増加率)`
    3.  **有利属性通常ダメージ**: `基礎ダメージ * (1.25 + ギアカスタム有利属性ダメージ増加率)`
    4.  **有利属性会心ダメージ**: `基礎ダメージ * (1.5 + ギアカスタム会心ダメージ増加率) * (1.25 + ギアカスタム有利属性ダメージ増加率)`
    *   `会心率` は、会心ダメージが発生するかどうかの確率であり、計算された会心ダメージを表示する際に、その確率が示唆される形式でUIに含めることを検討します。

**3. ユーザーインターフェース設計**

*   **ユーザー導線**:
    1.  **キャラクター選択**:
        *   キャラクターアイコンまたはリストからキャラクターを選択。
    2.  **スキル・スキルレベル選択**:
        *   選択されたキャラクターに対応する攻撃スキルが動的に表示されます。
        *   表示されたスキルの中から一つを選択。
        *   選択されたスキルに対して、スキルレベルを入力（数値入力フィールド）。
    3.  **敵の防御値入力**:
        *   敵の防御値を入力する数値入力フィールド。
    4.  **属性相性選択**:
        *   有利属性かどうかを選択するオプション（例: チェックボックス、ラジオボタン）。
    5.  **ギアカスタム入力**:
        *   会心ダメージ増加率を入力する数値入力フィールド (例: 0.1% ～ 100%)
        *   有利属性ダメージ増加率を入力する数値入力フィールド (例: 0.1% ～ 100%)
    6.  **ダメージ結果表示**:
        *   上記の入力結果に基づいて計算された、以下の4パターンのダメージ値が表示されるエリア。
            *   通常ダメージ
            *   会心ダメージ
            *   有利属性通常ダメージ
            *   有利属性会心ダメージ
*   **入力項目**:
    *   キャラクター選択 (視覚的な選択肢、例: キャラクターアイコン)
    *   攻撃スキル選択 (ドロップダウンメニュー、またはリスト)
    *   スキルレベル入力 (数値入力フィールド)
    *   敵の防御値入力 (数値入力フィールド)
    *   属性相性選択 (例: チェックボックス "有利属性")
    *   ギアカスタム: 会心ダメージ増加率 (数値入力フィールド、パーセンテージ表示)
    *   ギアカスタム: 有利属性ダメージ増加率 (数値入力フィールド、パーセンテージ表示)
*   **出力項目**:
    *   計算された4つのダメージ量（通常、会心、有利属性通常、有利属性会心）の明確な表示
*   **デザインコンセプト**:
    *   **グラフィカルで直感的なUI**: 表示文言を最小限に抑え、アイコンやビジュアル要素を多用してユーザーが直感的に操作できるデザインを目指します。
    *   シンプルで直感的なシングルページアプリケーション (SPA) 構成。
    *   PCおよびモバイルデバイスの両方に対応するレスポンシブデザイン。
*   **多言語対応**:
    *   日本語、英語、中国語の3パターンを切り替えられる機能を提供します。

**4. 技術選定**

*   **フロントエンド**:
    *   **フレームワーク**: `React` (コンポーネントベースの開発による高い再利用性と保守性)
    *   **ビルドツール**: `Vite` (高速な開発サーバーとビルド速度)
    *   **言語**: `TypeScript` (型安全性による開発効率と品質の向上)
    *   **状態管理**: (必要に応じて検討。ReactのContext APIやZustand, Jotaiなどの軽量なライブラリ)
    *   **多言語対応**: `i18next` などのライブラリを検討。
    *   **スタイリング**: CSS Modules, Styled Components, Tailwind CSS など、プロジェクトの規模と開発効率を考慮して選定。
*   **バックエンド**: ダメージ計算がフロントエンドで完結するため、現時点ではバックエンドの必要性は低いと判断します。もし将来的に複雑なデータ管理が必要になった場合は、Node.jsやPython (Flask) の導入を検討します。
*   **データベース**: 不要です。（キャラクター、スキル、スキルレベルごとの攻撃倍率、ギアカスタムのデータ範囲などのデータは、フロントエンドのJavaScript/TypeScript内で管理するか、JSONファイルとして読み込むことを想定。）

**5. デプロイメント戦略**

無料で簡単にデプロイできるサービスを優先的に検討します。

*   **GitHub Pages**: 静的サイトのホスティングに最適であり、フロントエンドのみの構成であれば最も簡単な選択肢です。
*   **Netlify**: 静的サイトのデプロイが容易で、CI/CD機能も提供します。
*   **Vercel**: Next.jsなどのフレームワークとの相性が良いですが、シンプルな構成であればGitHub PagesやNetlifyがより適しています。

**6. 開発スケジュール (概算)**

1.  **要件定義**: 1週間
2.  **UI/UX デザイン**: 1週間
3.  **フロントエンド開発**: 2週間
4.  **テストとデバッグ**: 1週間
5.  **デプロイメントと最終確認**: 1週間

**7. メンテナンスと拡張性**

*   将来的な機能追加や変更が容易に行えるよう、コードの可読性と保守性を重視した設計を心がけます。
*   ユーザーからのフィードバックを積極的に収集し、アプリの継続的な改善と機能拡張に繋げます。
